#!/bin/bash -e

. init.sh

for ARCH in i386; do
    DEST_DIR=/tmp/luwrain-iso/$ARCH
    mkdir -p $DEST_DIR/luwrain $DEST_DIR/.luwrain

    cd $DEST_DIR/luwrain
    mkdir jar
cp -r "$SRC_DIR/ubuntu-precompiled/$ARCH"  jni
cp -r "$SRC_DIR/data" data
cp -r "$SRC_DIR"/lib lib
cp  "$SRC_DIR/linux/luwrain.sh" luwrain.sh

#Jars
cp "$SRC_DIR/luwrain/jar/luwrain.jar" jar
#cp "$SRC_DIR/linux/jar/luwrain-linux.jar" jar

for i in base linux pim doctree interaction-javafx network; do
    cp "$SRC_DIR/$i/jar/luwrain-$i.jar" jar
done

for i in $APPS; do
    cp "$SRC_DIR"/app-$i/jar/luwrain-app-$i.jar jar
done

for i in $LANGS; do
    cp "$SRC_DIR"/i18n/$i/jar/luwrain-lang-$i.jar jar
done

for i in $EXTENSIONS; do
    cp "$SRC_DIR"/extensions/$i/jar/luwrain-ext-$i.jar jar
done

cd ../.luwrain
cp -r "$SRC_DIR"/hsqldb .
cp -r "$SRC_DIR"/registry/default.iso ./registry
mkdir extensions

done
